!function(){"use strict";window.livewireDebugbar=function(e){return{collapsed:e.config?.interface?.collapsed_by_default??!0,activeTab:e.config?.interface?.default_tab||"components",position:"bottom",showSettings:!1,hotReload:!1,hotReloadInterval:null,isResizing:!1,initialY:0,initialHeight:400,height:400,components:{},events:[],commits:[],performance:[],config:e.config||{},activeComponentId:null,activeComponentCommitId:null,stateHistory:{},validationErrors:{},lifecycleEvents:[],componentQueries:{},realTimeValidation:!0,stateChangeNotifications:!0,componentSearch:"",componentStateFilter:"",componentValidationFilter:"",componentViewMode:"cards",componentSort:"name",activeFilters:[],expandedComponents:{},expandedTreeNodes:{},init(){this.loadPreferences(),setTimeout((()=>{this.detectComponents(),this.storeInitialCommit(),this.setupEventListeners(),this.setupKeyboardShortcuts(),this.setupHotReload()}),100)},detectComponents(){if(!window.Livewire)return void console.error("Livewire not found!");const e=window.Livewire.all(),t={};e.forEach((e=>{const n=e.id;t[n]={id:n,name:e.name,class:e.name,state:"active",properties:this.extractProperties(e),element:e.el,fingerprint:e.fingerprint,serverMemo:e.serverMemo}})),this.components=t,Object.entries(t).forEach((([e,t])=>{this.validateComponentProperties(e,t.properties),this.storeComponentState(e,t.properties)}));const n=this.getComponentTree();Object.keys(n).forEach((e=>{this.expandedTreeNodes.hasOwnProperty(e)||(this.expandedTreeNodes[e]=!0)}))},storeComponentState(e,t){this.stateHistory[e]||(this.stateHistory[e]=[]);const n={timestamp:Date.now(),state:JSON.parse(JSON.stringify(t)),id:this.randomId()};this.stateHistory[e].push(n),this.stateHistory[e].length>50&&(this.stateHistory[e]=this.stateHistory[e].slice(-50))},validateComponentProperties(e,t){if(!this.realTimeValidation)return;const n=[];let o=1;Object.entries(t).forEach((([i,s])=>{s.isId&&!s.locked&&n.push({id:o++,type:"security",level:"critical",property:i,message:`ID property "${i}" is not locked - serious security vulnerability!`,suggestion:"Add #[Locked] attribute to this property",autoFix:!1}),s.size>10240&&n.push({id:o++,type:"performance",level:"warning",property:i,message:`Property "${i}" is very large (${(s.size/1024).toFixed(1)}KB)`,suggestion:"Consider optimizing data structure or using pagination",autoFix:!1});const r=Object.keys(t).length;r>30&&n.push({id:o++,type:"complexity",level:"warning",property:"component",message:`Component has ${r} properties - consider breaking it down`,suggestion:"Split into smaller, focused components",autoFix:!1});const a=i.toLowerCase();["password","secret","token","key","ssn","credit"].forEach((t=>{a.includes(t)&&!s.locked&&n.push({id:o++,type:"security",level:"high",property:i,message:`Property "${i}" contains sensitive data but is not locked`,suggestion:"Lock this property or move to server-side processing",autoFix:!0,autoFixAction:()=>this.suggestPropertyLock(e,i)})}));try{JSON.stringify(s.value)}catch(c){c.message.includes("circular")&&n.push({id:o++,type:"data",level:"error",property:i,message:`Property "${i}" contains circular references`,suggestion:"Remove circular references or use a different data structure",autoFix:!1})}})),this.validationErrors[e]=n,this.stateChangeNotifications&&n.some((e=>"critical"===e.level))&&this.showCriticalValidationAlert(e,n.filter((e=>"critical"===e.level)))},showCriticalValidationAlert(e,t){const n=this.components[e];if(!n)return;console.error(`🚨 CRITICAL SECURITY ISSUES in component ${n.name}:`,t);const o=document.createElement("div");o.className="livewire-debugbar-critical-alert",o.style.cssText="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: #dc2626;\n                color: white;\n                padding: 16px;\n                border-radius: 8px;\n                box-shadow: 0 10px 25px rgba(0,0,0,0.3);\n                z-index: 999999;\n                max-width: 400px;\n                font-family: monospace;\n                font-size: 12px;\n                line-height: 1.4;\n            ",o.innerHTML=`\n                <div style="font-weight: bold; margin-bottom: 8px;">🚨 CRITICAL SECURITY ISSUES</div>\n                <div style="margin-bottom: 8px;">Component: ${n.name}</div>\n                ${t.map((e=>`<div>• ${e.message}</div>`)).join("")}\n                <button onclick="this.parentNode.remove()" style="\n                    background: rgba(255,255,255,0.2);\n                    border: none;\n                    color: white;\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    margin-top: 8px;\n                    cursor: pointer;\n                ">Dismiss</button>\n            `,document.body.appendChild(o),setTimeout((()=>{o.parentNode&&o.remove()}),1e4)},suggestPropertyLock(e,t){const n=this.components[e];if(!n)return;const o=`\nTo fix the security issue with property "${t}" in component ${n.name}:\n\n1. Add the #[Locked] attribute to the property:\n\n   #[Locked]\n   public $${t};\n\n2. Or use the Locked trait method:\n\n   protected function lockProperties()\n   {\n       return ['${t}'];\n   }\n\nThis prevents users from modifying the property from the browser.\n            `;console.log("🔒 SECURITY FIX SUGGESTION:",o),alert(o)},trackLifecycleEvent(e,t,n){const o=Date.now();this.lifecycleEvents.push({id:this.randomId(),componentId:e,event:t,data:n,timestamp:o,component:this.getComponentById(e)}),this.lifecycleEvents.length>200&&(this.lifecycleEvents=this.lifecycleEvents.slice(-200))},getComponentLifecycleEvents(e){return this.lifecycleEvents.filter((t=>t.componentId===e)).reverse()},restoreComponentState(e,t){const n=this.stateHistory[e];if(!n)return;const o=n.find((e=>e.id===t));if(!o)return;const i=window.Livewire.find(e);if(i)try{Object.entries(o.state).forEach((([e,t])=>{i.$set(e,t)})),console.log(`🕰️ Restored component ${e} to state from ${new Date(o.timestamp).toLocaleTimeString()}`)}catch(s){console.error("Failed to restore state:",s)}},extractProperties(e){const t={};let n={},o={};if(e.data&&(n=e.data),e.$wire&&(n={...n,...e.$wire}),e.snapshot&&(e.snapshot.data&&(n={...n,...e.snapshot.data}),e.snapshot.memo?.dataMeta&&(o=e.snapshot.memo.dataMeta)),Object.keys(n).length>0){const e=o.locked||[],i=o.models||{},s=o.lazy||[],r=o.reactive||[];Object.entries(n).forEach((([n,o])=>{let a=typeof o;null===o&&(a="null"),Array.isArray(o)&&(a="array"),o instanceof Date&&(a="date");let c=0;try{c=JSON.stringify(o).length}catch(l){c=-1}t[n]={value:o,type:a,size:c,locked:e.includes(n),isModel:i.hasOwnProperty(n),isLazy:s.includes(n),isReactive:r.includes(n),isId:"id"===n.toLowerCase()||n.toLowerCase().endsWith("_id"),path:n}}))}return t},storeInitialCommit(){window.Livewire.all().forEach((e=>{this.commits.push({id:this.randomId(),initial:!0,current:!0,componentId:e.id,calls:null,size:null,snapshot:e.snapshotEncoded,effects:{returns:[],html:e.el.outerHTML.toString()},updates:null,duration:null})}))},setupEventListeners(){window.Livewire&&(window.Livewire.hook("component.init",(({component:e})=>{this.trackLifecycleEvent(e.id,"init",{name:e.name})})),window.Livewire.hook("element.init",(({component:e})=>{this.trackLifecycleEvent(e.id,"element.init")})),window.Livewire.hook("component.hydrate",(({component:e})=>{this.trackLifecycleEvent(e.id,"hydrate")})),window.Livewire.hook("component.dehydrate",(({component:e})=>{this.trackLifecycleEvent(e.id,"dehydrate")})),window.Livewire.hook("element.updating",(({component:e,cleanup:t})=>{this.trackLifecycleEvent(e.id,"updating")})),window.Livewire.hook("element.updated",(({component:e})=>{this.trackLifecycleEvent(e.id,"updated"),setTimeout((()=>this.detectComponents()),100)})),window.Livewire.hook("message.sent",(({component:e,message:t})=>{this.trackLifecycleEvent(e.id,"message.sent",{calls:t.updates,payload:t})})),window.Livewire.hook("message.received",(({component:e,message:t})=>{this.trackLifecycleEvent(e.id,"message.received",{response:t})})),window.Livewire.hook("message.failed",(({component:e,message:t})=>{this.trackLifecycleEvent(e.id,"message.failed",{error:t})})),window.Livewire.hook("commit",(({component:e,commit:t,succeed:n})=>{const o=performance.now();n((({snapshot:n,effects:i})=>{let s=Math.round(new Blob([JSON.stringify({snapshot:n,effects:i})]).size/1024*100)/100;const r=performance.now(),a=this.randomId();this.commits.push({id:a,initial:!1,current:!1,componentId:e.id,calls:t.calls,size:s,snapshot:n,effects:i,updates:t.updates,duration:Math.round(r-o)}),this.setComponentCurrentCommit(a),this.detectComponents()}))})))},getEvents(){return this.commits.filter((e=>e.effects?.dispatches)).map((e=>e.effects.dispatches.map((t=>({...t,id:this.randomId(),commitId:e.id,component:this.getComponentById(e.componentId),timestamp:Date.now(),type:"dispatched"}))))).flat().reverse()},eventSearch:"",eventTypeFilter:"all",expandedEvents:{},eventReplayStatus:null,getFilteredEvents(){let e=this.getEvents();if("all"!==this.eventTypeFilter&&(e=e.filter((e=>"error"===this.eventTypeFilter?!0===e.error:e.type===this.eventTypeFilter))),this.eventSearch){const t=this.eventSearch.toLowerCase();e=e.filter((e=>{if((e.name||e.event||"").toLowerCase().includes(t))return!0;if((e.component?.name||"").toLowerCase().includes(t))return!0;try{return JSON.stringify(e.params).toLowerCase().includes(t)}catch(n){return e.params&&"object"==typeof e.params}}))}return e},getEventsByType(e){const t=this.getEvents();return"error"===e?t.filter((e=>!0===e.error)):t.filter((t=>t.type===e))},getUniqueEventNames(){const e=this.getEvents(),t=new Set(e.map((e=>e.name||e.event)));return Array.from(t)},getAverageEventTime(){const e=this.getEvents().filter((e=>e.duration));if(0===e.length)return 0;const t=e.reduce(((e,t)=>e+t.duration),0);return Math.round(t/e.length)},getGroupedEvents(){const e=Date.now(),t={};return this.getFilteredEvents().forEach((n=>{const o=n.timestamp||e,i=e-o;let s="Just now";i>36e5?s=`${Math.floor(i/36e5)} hours ago`:i>6e4?s=`${Math.floor(i/6e4)} minutes ago`:i>5e3&&(s=`${Math.floor(i/1e3)} seconds ago`),t[s]||(t[s]=[]),t[s].push(n)})),Object.entries(t).map((([e,t])=>({label:e,events:t})))},formatEventTime:e=>new Date(e).toLocaleTimeString(),formatParamValue(e){if(null===e)return"null";if(void 0===e)return"undefined";if("object"==typeof e)try{return JSON.stringify(e)}catch(t){if(Array.isArray(e))return`[Array(${e.length})]`;const n=Object.keys(e);return n.length>5?`{${n.slice(0,5).join(", ")}, ...}`:`{${n.join(", ")}}`}return String(e)},getParamType:e=>null===e?"null":Array.isArray(e)?"array":typeof e,cleanEventForExport(e){const t={id:e.id,name:e.name||e.event,type:e.type,params:e.params||[],timestamp:e.timestamp,commitId:e.commitId,component:e.component?{id:e.component.id,name:e.component.name}:null};return e.duration&&(t.duration=e.duration),e.error&&(t.error=e.error),e.caller_method&&(t.caller_method=e.caller_method),t},copyEventData(e){const t=this.cleanEventForExport(e);navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.showNotification("Event data copied to clipboard")},initEditFields(e){const t=this.$el.querySelector('[x-data*="editing"]');t&&t.__x&&(t.__x.getUnobservedData().editFields=this.flattenEventParams(e.params||{}))},flattenEventParams(e,t=""){let n=[];return Object.entries(e||{}).forEach((([e,o])=>{const i=t?`${t}.${e}`:e;n.push({path:i,value:o,type:this.getParamType(o),key:e})})),n},saveAndReplayEvent(e){const t=this.$el.querySelector('[x-data*="editing"]');if(t&&t.__x){const n=t.__x.getUnobservedData().editFields,o={};n.forEach((e=>{o[e.key]=e.value})),e.params=o,t.__x.getUnobservedData().editing=!1,this.replayEvent(e)}},clearEvents(){this.commits=this.commits.map((e=>({...e,effects:{...e.effects,dispatches:[]}}))),this.showNotification("All events cleared")},exportEvents(){const e=this.getEvents().map((e=>this.cleanEventForExport(e))),t=JSON.stringify({events:e,exported_at:(new Date).toISOString(),total_count:e.length},null,2),n="data:application/json;charset=utf-8,"+encodeURIComponent(t),o=`livewire-events-${Date.now()}.json`,i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",o),i.click(),this.showNotification("Events exported successfully")},getAffectedComponents(e){return Object.values(this.components).filter((t=>e.component?.id===t.id))},getAffectedComponentsDescription(e){const t=this.getAffectedComponents(e);return 0===t.length?"No components were directly affected by this event.":`This event affected ${t.length} component(s): ${t.map((e=>e.name)).join(", ")}`},getRelatedMethods:e=>[],getRelatedMethodsDescription(e){const t=this.getRelatedMethods(e);return 0===t.length?"No methods were triggered by this event.":`This event triggered ${t.length} method(s).`},getModifiedProperties:e=>[],getModifiedPropertiesDescription(e){const t=this.getModifiedProperties(e);return 0===t.length?"No properties were modified by this event.":`This event modified ${t.length} property/properties.`},copyRawData(e){const t=this.cleanEventForExport(e);navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.showNotification("Raw data copied to clipboard")},downloadRawData(e){const t=this.cleanEventForExport(e),n=JSON.stringify(t,null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(n),i=`event-${e.id}-${Date.now()}.json`,s=document.createElement("a");s.setAttribute("href",o),s.setAttribute("download",i),s.click(),this.showNotification("Event data downloaded")},getDefaultValueForType(e){switch(e){case"boolean":return!1;case"number":return 0;case"string":return"";default:return null}},filterEvents(){},activeComponentCommits(){return this.getComponentCommitsById(this.activeComponentId)},getComponentCommitsById(e){return e?this.commits.filter((t=>t.componentId===e)).reverse():[]},getLastComponentCommitById(e){return this.getComponentCommitsById(e)[0]??null},getComponentActiveCommit(e){return this.getComponentCommitsById(e).find((e=>!0===e.current))??null},setComponentCurrentCommit(e){let t=this.commits.find((t=>t.id===e));if(!t)return;let n=t.componentId;this.commits.forEach((t=>{t.componentId===n&&(t.current=t.id===e)}))},updateProperty(e,t,n){try{const i=JSON.parse(n),s=this.components[e];if(!s)return void console.error("Component not found:",e);if(s.properties[t]&&(s.properties[t].value=i,s.properties[t].size=JSON.stringify(i).length,s.properties[t].type=Array.isArray(i)?"array":typeof i),window.Livewire){const n=window.Livewire.find(e);if(n)try{n.$wire&&"function"==typeof n.$wire.set?n.$wire.set(t,i):n.$wire&&void 0!==n.$wire[t]?n.$wire[t]=i:n.data&&void 0!==n.data[t]?n.data[t]=i:console.warn(`Could not update property ${t} on component ${e}`)}catch(o){console.error("Error updating Livewire component:",o)}}}catch(o){console.error("Failed to update property:",o),alert("Invalid JSON value. Please check your syntax.")}},refreshComponent(e){if(window.Livewire){const t=window.Livewire.find(e);t&&(t.$wire&&"function"==typeof t.$wire.refresh?t.$wire.refresh():t.$wire&&"function"==typeof t.$wire.$refresh?t.$wire.$refresh():"function"==typeof t.call?t.call("$refresh"):this.detectComponents())}},refreshAllComponents(){Object.keys(this.components).forEach((e=>{this.refreshComponent(e)})),this.showNotification("🔄 All components refreshed","success")},getComponentById:e=>window.Livewire.all().find((t=>t.id===e)),randomId:()=>Math.random().toString(36).substring(7),getTotalProperties(){return Object.values(this.components).reduce(((e,t)=>e+Object.keys(t.properties||{}).length),0)},getTotalDataSize(){return(Object.values(this.components).reduce(((e,t)=>e+Object.values(t.properties||{}).reduce(((e,t)=>e+(t.size||0)),0)),0)/1024).toFixed(1)},getComponentDataSize:e=>(Object.values(e.properties||{}).reduce(((e,t)=>e+(t.size||0)),0)/1024).toFixed(1),getPropertyCountStatus(e){const t=Object.keys(e.properties||{}).length,n=this.config.performance?.max_properties||50;return t>=n?"error":t>=.8*n?"warning":"ok"},getDataSizeStatus(e){const t=parseFloat(this.getComponentDataSize(e)),n=this.config.performance?.max_data_size||256;return t>=n?"error":t>=.8*n?"warning":"ok"},getPerformanceWarnings(e){const t=[],n=Object.keys(e.properties||{}).length,o=parseFloat(this.getComponentDataSize(e)),i=this.config.performance?.max_properties||50;n>=i?t.push({type:"property_count",level:"error",message:`Too many properties (${n}/${i}). Consider reducing component state.`}):n>=.8*i&&t.push({type:"property_count",level:"warning",message:`High property count (${n}/${i}). Monitor component complexity.`});const s=this.config.performance?.max_data_size||256;return o>=s?t.push({type:"data_size",level:"error",message:`Component data too large (${o}KB/${s}KB). Optimize data structure.`}):o>=.8*s&&t.push({type:"data_size",level:"warning",message:`Large component data (${o}KB/${s}KB). Consider optimization.`}),Object.entries(e.properties||{}).forEach((([e,n])=>{n.isId&&!n.locked&&t.push({type:"unlocked_id",level:"error",message:`Unlocked ID property "${e}" poses security and performance risks.`})})),t},getLargeProperties(e){const t=1024*(this.config.performance?.property_warning_size||10);return Object.entries(e.properties||{}).map((([e,t])=>({name:e,...t}))).filter((e=>e.size>=t)).sort(((e,t)=>t.size-e.size))},getSecurityIssues(){const e=[];let t=1;return Object.entries(this.components).forEach((([n,o])=>{Object.entries(o.properties||{}).forEach((([n,i])=>{i.isId&&!i.locked&&e.push({id:t++,level:"critical",title:"Unlocked ID Property",message:`Property "${n}" appears to be an ID field but is not locked. This allows users to modify IDs, potentially leading to unauthorized access.`,component:o.name,property:n,recommendation:"Add #[Locked] attribute to this property"}),!i.locked&&i.size>10240&&e.push({id:t++,level:"high",title:"Large Unlocked Property",message:`Property "${n}" is large (${(i.size/1024).toFixed(1)}KB) and unlocked. Large unlocked properties can impact performance and may contain sensitive data.`,component:o.name,property:n,recommendation:"Consider locking this property or reducing its size"});const s=n.toLowerCase();["password","secret","key","token","email","phone","ssn","credit"].forEach((r=>{s.includes(r)&&!i.locked&&e.push({id:t++,level:"warning",title:"Potential Sensitive Data",message:`Property "${n}" may contain sensitive information but is not locked.`,component:o.name,property:n,recommendation:"Review if this property should be locked"})}))}));const i=Object.keys(o.properties||{}).length;i>100&&e.push({id:t++,level:"warning",title:"Component Complexity",message:`Component has ${i} properties, which may indicate high complexity and potential security surface area.`,component:o.name,recommendation:"Consider breaking down into smaller components"})})),e.sort(((e,t)=>{const n={critical:3,high:2,warning:1};return n[t.level]-n[e.level]}))},getUnlockedProperties(){const e=[];let t=1;return Object.entries(this.components).forEach((([n,o])=>{Object.entries(o.properties||{}).forEach((([n,i])=>{if(!i.locked){const s=[];i.isId&&s.push("Lock this property immediately - ID fields should never be modifiable by users"),i.size>5120&&s.push("Consider if this large property needs to be unlocked");const r=["password","secret","key","token","email"].some((e=>n.toLowerCase().includes(e)));r&&s.push("This appears to contain sensitive data and should likely be locked"),e.push({id:t++,component:o.name,property:n,type:i.type,size:i.size,isId:i.isId,isSensitive:r,recommendations:s})}}))})),e},getSensitiveData(){const e=[];let t=1;const n=[{pattern:"password",reason:"Contains password-related data",recommendation:"Never expose passwords in component state"},{pattern:"secret",reason:"Contains secret or confidential data",recommendation:"Move secrets to secure server-side storage"},{pattern:"key",reason:"Contains key or token data",recommendation:"Use secure key management systems"},{pattern:"token",reason:"Contains authentication tokens",recommendation:"Handle tokens securely on the server side"},{pattern:"email",reason:"Contains email addresses",recommendation:"Consider if email exposure is necessary"},{pattern:"phone",reason:"Contains phone numbers",recommendation:"Ensure proper privacy compliance"},{pattern:"ssn",reason:"Contains social security numbers",recommendation:"Remove SSN from component state immediately"},{pattern:"credit",reason:"Contains credit card information",recommendation:"Never store credit card data in components"}];return Object.entries(this.components).forEach((([o,i])=>{Object.entries(i.properties||{}).forEach((([o,s])=>{const r=o.toLowerCase();if(n.forEach((({pattern:n,reason:a,recommendation:c})=>{r.includes(n)&&e.push({id:t++,component:i.name,property:o,pattern:n.toUpperCase(),reason:a,recommendation:c,locked:s.locked})})),"string"==typeof s.value){const n=s.value.toString();n.includes("@")&&n.includes(".")&&e.push({id:t++,component:i.name,property:o,pattern:"EMAIL",reason:"Property value appears to contain an email address",recommendation:"Ensure email addresses are handled according to privacy policies",locked:s.locked}),/\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/.test(n)&&e.push({id:t++,component:i.name,property:o,pattern:"PHONE",reason:"Property value appears to contain a phone number",recommendation:"Verify phone number handling complies with privacy requirements",locked:s.locked})}}))})),e},focusSecurityIssue(e){this.activeTab="components"},getPerformanceIssueCount(){return Object.values(this.components).reduce(((e,t)=>e+this.getPerformanceWarnings(t).filter((e=>"error"===e.level)).length),0)},getPerformanceWarningCount(){return Object.values(this.components).reduce(((e,t)=>e+this.getPerformanceWarnings(t).filter((e=>"warning"===e.level)).length),0)},togglePosition(){const e=["bottom","top","left","right"],t=(e.indexOf(this.position)+1)%e.length;this.position=e[t],this.savePreferences()},toggleSettings(){this.showSettings=!this.showSettings},resetPosition(){this.position="bottom",this.savePreferences()},loadPreferences(){const e=localStorage.getItem("livewire-debugbar-position");e&&["bottom","top","left","right"].includes(e)&&(this.position=e);const t=localStorage.getItem("livewire-debugbar-collapsed");null!==t&&(this.collapsed="true"===t);const n=localStorage.getItem("livewire-debugbar-height");n&&(this.height=parseInt(n))},savePreferences(){localStorage.setItem("livewire-debugbar-position",this.position),localStorage.setItem("livewire-debugbar-collapsed",this.collapsed.toString())},setupKeyboardShortcuts(){this.config.interface?.keyboard_shortcuts&&document.addEventListener("keydown",(e=>{if((e.ctrlKey||e.metaKey)&&e.shiftKey&&"D"===e.key&&(e.preventDefault(),this.toggleCollapse()),(e.ctrlKey||e.metaKey)&&e.shiftKey)switch(e.key){case"1":e.preventDefault(),this.activeTab="components";break;case"2":e.preventDefault(),this.activeTab="events";break;case"3":e.preventDefault(),this.activeTab="performance";break;case"4":e.preventDefault(),this.activeTab="security"}}))},setupHotReload(){if(!this.config.hot_reload?.enabled)return;"true"===localStorage.getItem("livewire-debugbar-hot-reload")&&this.startHotReload()},startHotReload(){if(this.hotReloadInterval)return;this.hotReload=!0;const e=this.config.hot_reload?.interval||3e3;this.hotReloadInterval=window.setInterval((()=>{if(this.detectComponents(),this.activeComponentId){const e=this.getComponentById(this.activeComponentId);e&&e.$wire.$refresh()}}),e),localStorage.setItem("livewire-debugbar-hot-reload","true")},stopHotReload(){this.hotReloadInterval&&(clearInterval(this.hotReloadInterval),this.hotReloadInterval=null),this.hotReload=!1,localStorage.setItem("livewire-debugbar-hot-reload","false")},toggleHotReload(){this.hotReload?this.stopHotReload():this.startHotReload()},startResize(e){this.isResizing=!0,this.initialY=e.clientY,this.initialHeight=this.height,document.addEventListener("mousemove",this.handleResize.bind(this)),document.addEventListener("mouseup",this.stopResize.bind(this)),e.preventDefault()},handleResize(e){if(!this.isResizing)return;const t=this.initialY-e.clientY,n=Math.max(200,Math.min(800,this.initialHeight+t));this.height=n;const o=document.querySelector(".livewire-debugbar");o&&(o.style.height=`${n}px`)},stopResize(){this.isResizing=!1,document.removeEventListener("mousemove",this.handleResize.bind(this)),document.removeEventListener("mouseup",this.stopResize.bind(this)),localStorage.setItem("livewire-debugbar-height",this.height.toString())},replayEvent(e){if(!window.Livewire)return;const t=e.name||e.event,n=e.params||[];if(e.component&&e.component.id){const o=window.Livewire.find(e.component.id);if(o&&o.$wire&&o.$wire.$dispatch)return o.$wire.$dispatch(t,...n),void console.log(`Event "${t}" replayed from component ${e.component.name}`)}window.Livewire.dispatch(t,...n),console.log(`Event "${t}" replayed globally`)},getComponentValidationErrors(e){return this.validationErrors[e]||[]},getComponentStateHistory(e){return this.stateHistory[e]||[]},exportComponentData(e){const t=this.components[e];if(!t)return;const n={component:{id:e,name:t.name,state:t.state,properties:t.properties,updates:t.updates||[],snapshot:t.snapshot||null,memo:t.memo||{},checksum:t.checksum||null},stateHistory:this.getComponentStateHistory(e),validationErrors:this.getComponentValidationErrors(e),lifecycleEvents:this.getComponentLifecycleEvents(e),commits:this.getComponentCommitsById(e),timestamp:(new Date).toISOString()},o=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),i=URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=`livewire-component-${t.name}-${e}.json`,s.click(),URL.revokeObjectURL(i),this.showNotification(`📁 Component data exported: ${t.name}`,"success"),console.log("📁 Component data exported:",e)},generateTestCode(e){const t=this.components[e];if(!t)return;const n=Object.entries(t.properties).map((([e,t])=>`        '${e}' => ${JSON.stringify(t.value)}`)).join(",\n"),o=`\n<?php\n\nuse Livewire\\Livewire;\n\ntest('${t.name} component renders and functions correctly', function () {\n    // Test initial render\n    Livewire::test(${t.name}::class, [\n${n}\n    ])\n    ->assertStatus(200)\n    ->assertSee('expected content');\n\n    // Test property updates\n${Object.keys(t.properties).map((e=>`    // ->set('${e}', 'new value')\n    // ->assertSet('${e}', 'new value')`)).join("\n")}\n\n    // Test method calls\n    // ->call('methodName')\n    // ->assertEmitted('eventName');\n});\n            `;navigator.clipboard.writeText(o.trim()).then((()=>{this.showNotification("📋 Test code copied to clipboard","success"),console.log("📋 Test code copied to clipboard")})).catch((()=>{this.showNotification("Failed to copy test code","error")}))},getPerformanceInsights(){const e=Object.keys(this.components).length,t=Object.values(this.components).reduce(((e,t)=>e+Object.keys(t.properties).length),0),n=t/e||0,o=Object.entries(this.components).map((([e,t])=>({id:e,name:t.name,propertyCount:Object.keys(t.properties).length,dataSize:Object.values(t.properties).reduce(((e,t)=>e+t.size),0)}))).sort(((e,t)=>t.dataSize-e.dataSize)).slice(0,5);return{totalComponents:e,totalProperties:t,averageProperties:Math.round(10*n)/10,largestComponents:o,totalValidationErrors:Object.values(this.validationErrors).flat().length,criticalErrors:Object.values(this.validationErrors).flat().filter((e=>"critical"===e.level)).length}},toggleRealTimeValidation(){this.realTimeValidation=!this.realTimeValidation,localStorage.setItem("livewire-debugbar-real-time-validation",this.realTimeValidation.toString()),this.realTimeValidation?Object.entries(this.components).forEach((([e,t])=>{this.validateComponentProperties(e,t.properties)})):this.validationErrors={}},toggleStateChangeNotifications(){this.stateChangeNotifications=!this.stateChangeNotifications,localStorage.setItem("livewire-debugbar-state-notifications",this.stateChangeNotifications.toString())},compareComponentStates(e,t,n){const o=this.stateHistory[e];if(!o)return null;const i=o.find((e=>e.id===t)),s=o.find((e=>e.id===n));if(!i||!s)return null;const r=[];return new Set([...Object.keys(i.state),...Object.keys(s.state)]).forEach((e=>{const t=i.state[e],n=s.state[e];JSON.stringify(t)!==JSON.stringify(n)&&r.push({property:e,before:t,after:n,type:void 0===t?"added":void 0===n?"removed":"changed"})})),{state1:i,state2:s,differences:r,changeCount:r.length}},filterComponents(){},sortedComponents(){let e=Object.entries(this.components);if(this.componentSearch){const t=this.componentSearch.toLowerCase();e=e.filter((([e,n])=>n.name.toLowerCase().includes(t)||e.toLowerCase().includes(t)))}return this.componentStateFilter&&(e=e.filter((([e,t])=>t.state===this.componentStateFilter))),this.componentValidationFilter&&(e=e.filter((([e,t])=>{const n=this.getComponentValidationErrors(e);switch(this.componentValidationFilter){case"valid":return 0===n.length;case"warnings":return n.some((e=>"warning"===e.level));case"errors":return n.some((e=>"critical"===e.level||"error"===e.level));default:return!0}}))),e.sort((([e,t],[n,o])=>{switch(this.componentSort){case"properties":return Object.keys(o.properties||{}).length-Object.keys(t.properties||{}).length;case"size":const e=Object.values(t.properties||{}).reduce(((e,t)=>e+t.size),0);return Object.values(o.properties||{}).reduce(((e,t)=>e+t.size),0)-e;case"performance":const n=this.getPerformanceWarnings(t).length;return this.getPerformanceWarnings(o).length-n;default:return t.name.localeCompare(o.name)}})),e},focusComponent(e){const t=this.components[e];if(!t||!t.element)return;t.element.scrollIntoView({behavior:"smooth",block:"center"});const n=t.element.style.outline;t.element.style.outline="3px solid #3B82F6",t.element.style.outlineOffset="2px",setTimeout((()=>{t.element.style.outline=n}),2e3),console.log(`🎯 Focused on component: ${t.name}`)},copyComponentPath(e){const t=`app/Http/Livewire/${e.split(".").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("/")}.php`;navigator.clipboard.writeText(t).then((()=>{this.showNotification(`📋 Path copied: ${t}`,"success"),console.log(`📋 Copied path: ${t}`)})).catch((()=>{this.showNotification("Failed to copy component path","error")}))},removeFilter(e){const t=this.activeFilters.indexOf(e);t>-1&&this.activeFilters.splice(t,1)},getComponentTree(){const e={},t={};return Object.entries(this.components).forEach((([e,n])=>{t[e]={component:n,children:[]}})),Object.entries(this.components).forEach((([n,o])=>{if(o.element){let i=o.element.parentElement,s=null;for(;i&&!s;){const e=Array.from(i.attributes||[]).find((e=>"wire:id"===e.name))?.value;if(e&&t[e]){s=t[e],s.children.push(n);break}i=i.parentElement}s||(e[n]=t[n])}})),e},hasChildren(e){const t=this.components[e];return!(!t||!t.element)&&Object.values(this.components).some((t=>{if(!t.element||t.id===e)return!1;let n=t.element.parentElement;for(;n;){const t=Array.from(n.attributes||[]).find((e=>"wire:id"===e.name))?.value;if(t===e)return!0;n=n.parentElement}return!1}))},toggleTreeNode(e){this.expandedTreeNodes[e]=!this.expandedTreeNodes[e]},componentMatchesSearch(e){if(!this.componentSearch)return!0;const t=this.componentSearch.toLowerCase();return e.name.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)},toggleCollapse(){this.collapsed=!this.collapsed,this.savePreferences()},showNotification(e,t="info"){const n=document.createElement("div");n.className="ldb-notification";const o={success:{bg:"#10B981",text:"white"},error:{bg:"#EF4444",text:"white"},warning:{bg:"#F59E0B",text:"black"},info:{bg:"#3B82F6",text:"white"}}[t];n.style.cssText=`\n                position: fixed;\n                bottom: 20px;\n                right: 20px;\n                background: ${o.bg};\n                color: ${o.text};\n                padding: 12px 20px;\n                border-radius: 8px;\n                font-family: var(--ldb-font-sans);\n                font-size: 14px;\n                font-weight: 500;\n                z-index: 999999;\n                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                max-width: 400px;\n                transform: translateX(100%);\n                transition: transform 0.3s ease;\n            `,n.textContent=e,document.body.appendChild(n),requestAnimationFrame((()=>{n.style.transform="translateX(0)"})),setTimeout((()=>{n.style.transform="translateX(100%)",setTimeout((()=>{n.parentNode&&n.remove()}),300)}),4e3),n.addEventListener("click",(()=>{n.style.transform="translateX(100%)",setTimeout((()=>{n.parentNode&&n.remove()}),300)}))},eventStatistics:{total:0,byType:{},byComponent:{},avgPayloadSize:0,peakTime:null,replays:{}},showEventEditor:!1,editingEvent:null,autoRefresh:!1,toggleEventDetails(e){const t=document.getElementById(`event-details-${e}`);t&&t.classList.toggle("hidden")},editEvent(e){const t=this.events.find((t=>t.id===e));t&&(this.editingEvent=JSON.parse(JSON.stringify(t)),this.showEventEditor=!0)},saveEventEdit(){if(!this.editingEvent)return;const e=this.events.findIndex((e=>e.id===this.editingEvent.id));-1!==e&&(this.events[e]=JSON.parse(JSON.stringify(this.editingEvent)),this.showNotification(window.livewireDebugbarTranslations?.event_updated||"Event updated","success")),this.showEventEditor=!1,this.editingEvent=null},cancelEventEdit(){this.showEventEditor=!1,this.editingEvent=null},deleteEvent(e){const t=this.events.findIndex((t=>t.id===e));-1!==t&&(this.events.splice(t,1),this.showNotification(window.livewireDebugbarTranslations?.event_deleted||"Event deleted","success"))},async importEvents(e){const t=e.target;if(t.files&&t.files[0]){try{const e=await t.files[0].text(),n=JSON.parse(e);if(!n.events||!Array.isArray(n.events))throw new Error("Invalid format");this.events=[...this.events,...n.events],this.showNotification(window.livewireDebugbarTranslations?.events_imported||"Events imported successfully","success")}catch(n){this.showNotification(window.livewireDebugbarTranslations?.import_error||"Failed to import events","error")}t.value=""}},updateEventStatistics(){const e=this.getEvents();if(!e.length)return void(this.eventStatistics={total:0,byType:{},byComponent:{},avgPayloadSize:0,peakTime:null,replays:this.eventStatistics.replays||{}});const t={total:e.length,byType:{},byComponent:{},avgPayloadSize:0,peakTime:null,replays:this.eventStatistics.replays||{}};let n=0;const o={};e.forEach((e=>{const i=e.name||e.event||"Unknown";t.byType[i]=(t.byType[i]||0)+1,e.component&&e.component.name&&(t.byComponent[e.component.name]=(t.byComponent[e.component.name]||0)+1);const s=e.params||e.payload||[];n+=JSON.stringify(s).length;const r=e.timestamp||Date.now(),a=`${new Date(r).getHours()}:00`;o[a]=(o[a]||0)+1})),t.avgPayloadSize=Math.round(n/e.length);let i=0;Object.entries(o).forEach((([e,n])=>{n>i&&(i=n,t.peakTime=e)})),this.eventStatistics=t},initializeEventTab(){this.updateEventStatistics(),this.autoRefresh&&setInterval((()=>{"events"===this.activeTab&&this.updateEventStatistics()}),5e3)},updateEditField(e,t,n){this.editFields[e]||(this.editFields[e]={type:n});let o=t;switch(n){case"number":o=parseFloat(t);break;case"boolean":o="true"===t;break;case"object":case"array":try{o=JSON.parse(t)}catch(i){}}this.editFields[e].value=o},addNewParam(){const e=`param_${Date.now()}`;this.editFields[e]={value:"",type:"string",isNew:!0}},removeParam(e){delete this.editFields[e]},getQueryCount:()=>0,getAverageRenderTime(){const e=this.commits.filter((e=>e.duration));if(0===e.length)return 0;const t=e.reduce(((e,t)=>e+t.duration),0);return Math.round(t/e.length)},exportPerformanceData(){const e={timestamp:(new Date).toISOString(),summary:{totalComponents:Object.keys(this.components).length,totalProperties:this.getTotalProperties(),totalMemory:this.getTotalDataSize()+" KB",totalEvents:this.getEvents().length,averageRenderTime:this.getAverageRenderTime()+" ms",averagePropertiesPerComponent:Math.round(this.getTotalProperties()/Object.keys(this.components).length)},components:Object.entries(this.components).map((([e,t])=>({id:e,name:t.name,properties:Object.keys(t.properties).length,memory:this.getComponentDataSize(t)+" KB",warnings:this.getPerformanceWarnings(t).length,status:this.getPropertyCountStatus(t),largeProperties:this.getLargeProperties(t).map((e=>({name:e.name,size:(e.size/1024).toFixed(1)+" KB",type:e.type})))}))),warnings:this.getAllPerformanceWarnings(),thresholds:this.config.thresholds||{},lifecycleEvents:this.lifecycleEvents.slice(-50)},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download=`livewire-performance-report-${Date.now()}.json`,i.click(),URL.revokeObjectURL(o),this.showNotification("Performance report exported","success")},getAllPerformanceWarnings(){const e=[];return Object.entries(this.components).forEach((([t,n])=>{const o=this.getPerformanceWarnings(n);o.length>0&&e.push({componentId:t,componentName:n.name,warnings:o})})),e}}}}();

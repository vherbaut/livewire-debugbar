!function(){"use strict";window.livewireDebugbar=function(e){return{collapsed:e.config?.interface?.collapsed_by_default??!0,activeTab:e.config?.interface?.default_tab||"components",position:"bottom",showSettings:!1,hotReload:!1,hotReloadInterval:null,isResizing:!1,initialY:0,initialHeight:400,height:400,components:{},events:[],commits:[],performance:[],config:e.config||{},activeComponentId:null,activeComponentCommitId:null,stateHistory:{},validationErrors:{},lifecycleEvents:[],componentQueries:{},realTimeValidation:!0,stateChangeNotifications:!0,componentSearch:"",componentStateFilter:"",componentValidationFilter:"",componentViewMode:"cards",componentSort:"name",activeFilters:[],expandedComponents:{},expandedTreeNodes:{},init(){this.loadPreferences(),setTimeout((()=>{this.detectComponents(),this.storeInitialCommit(),this.setupEventListeners(),this.setupKeyboardShortcuts(),this.setupHotReload()}),100)},detectComponents(){if(!window.Livewire)return void console.error("Livewire not found!");const e=window.Livewire.all(),t={};e.forEach((e=>{const o=e.id;t[o]={id:o,name:e.name,class:e.name,state:"active",properties:this.extractProperties(e),element:e.el,fingerprint:e.fingerprint,serverMemo:e.serverMemo}})),this.components=t,Object.entries(t).forEach((([e,t])=>{this.validateComponentProperties(e,t.properties),this.storeComponentState(e,t.properties)}));const o=this.getComponentTree();Object.keys(o).forEach((e=>{this.expandedTreeNodes.hasOwnProperty(e)||(this.expandedTreeNodes[e]=!0)}))},storeComponentState(e,t){this.stateHistory[e]||(this.stateHistory[e]=[]);const o={timestamp:Date.now(),state:JSON.parse(JSON.stringify(t)),id:this.randomId()};this.stateHistory[e].push(o),this.stateHistory[e].length>50&&(this.stateHistory[e]=this.stateHistory[e].slice(-50))},validateComponentProperties(e,t){if(!this.realTimeValidation)return;const o=[];let i=1;Object.entries(t).forEach((([n,s])=>{s.isId&&!s.locked&&o.push({id:i++,type:"security",level:"critical",property:n,message:`ID property "${n}" is not locked - serious security vulnerability!`,suggestion:"Add #[Locked] attribute to this property",autoFix:!1}),s.size>10240&&o.push({id:i++,type:"performance",level:"warning",property:n,message:`Property "${n}" is very large (${(s.size/1024).toFixed(1)}KB)`,suggestion:"Consider optimizing data structure or using pagination",autoFix:!1});const r=Object.keys(t).length;r>30&&o.push({id:i++,type:"complexity",level:"warning",property:"component",message:`Component has ${r} properties - consider breaking it down`,suggestion:"Split into smaller, focused components",autoFix:!1});const a=n.toLowerCase();["password","secret","token","key","ssn","credit"].forEach((t=>{a.includes(t)&&!s.locked&&o.push({id:i++,type:"security",level:"high",property:n,message:`Property "${n}" contains sensitive data but is not locked`,suggestion:"Lock this property or move to server-side processing",autoFix:!0,autoFixAction:()=>this.suggestPropertyLock(e,n)})}));try{JSON.stringify(s.value)}catch(c){c.message.includes("circular")&&o.push({id:i++,type:"data",level:"error",property:n,message:`Property "${n}" contains circular references`,suggestion:"Remove circular references or use a different data structure",autoFix:!1})}})),this.validationErrors[e]=o,this.stateChangeNotifications&&o.some((e=>"critical"===e.level))&&this.showCriticalValidationAlert(e,o.filter((e=>"critical"===e.level)))},showCriticalValidationAlert(e,t){const o=this.components[e];if(!o)return;console.error(`🚨 CRITICAL SECURITY ISSUES in component ${o.name}:`,t);const i=document.createElement("div");i.className="livewire-debugbar-critical-alert",i.style.cssText="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: #dc2626;\n                color: white;\n                padding: 16px;\n                border-radius: 8px;\n                box-shadow: 0 10px 25px rgba(0,0,0,0.3);\n                z-index: 999999;\n                max-width: 400px;\n                font-family: monospace;\n                font-size: 12px;\n                line-height: 1.4;\n            ",i.innerHTML=`\n                <div style="font-weight: bold; margin-bottom: 8px;">🚨 CRITICAL SECURITY ISSUES</div>\n                <div style="margin-bottom: 8px;">Component: ${o.name}</div>\n                ${t.map((e=>`<div>• ${e.message}</div>`)).join("")}\n                <button onclick="this.parentNode.remove()" style="\n                    background: rgba(255,255,255,0.2);\n                    border: none;\n                    color: white;\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    margin-top: 8px;\n                    cursor: pointer;\n                ">Dismiss</button>\n            `,document.body.appendChild(i),setTimeout((()=>{i.parentNode&&i.remove()}),1e4)},suggestPropertyLock(e,t){const o=this.components[e];if(!o)return;const i=`\nTo fix the security issue with property "${t}" in component ${o.name}:\n\n1. Add the #[Locked] attribute to the property:\n\n   #[Locked]\n   public $${t};\n\n2. Or use the Locked trait method:\n\n   protected function lockProperties()\n   {\n       return ['${t}'];\n   }\n\nThis prevents users from modifying the property from the browser.\n            `;console.log("🔒 SECURITY FIX SUGGESTION:",i),alert(i)},trackLifecycleEvent(e,t,o){const i=Date.now();this.lifecycleEvents.push({id:this.randomId(),componentId:e,event:t,data:o,timestamp:i,component:this.getComponentById(e)}),this.lifecycleEvents.length>200&&(this.lifecycleEvents=this.lifecycleEvents.slice(-200))},getComponentLifecycleEvents(e){return this.lifecycleEvents.filter((t=>t.componentId===e)).reverse()},restoreComponentState(e,t){const o=this.stateHistory[e];if(!o)return;const i=o.find((e=>e.id===t));if(!i)return;const n=window.Livewire.find(e);if(n)try{Object.entries(i.state).forEach((([e,t])=>{n.$set(e,t)})),console.log(`🕰️ Restored component ${e} to state from ${new Date(i.timestamp).toLocaleTimeString()}`)}catch(s){console.error("Failed to restore state:",s)}},extractProperties(e){const t={};let o={},i={};if(e.data&&(o=e.data),e.$wire&&(o={...o,...e.$wire}),e.snapshot&&(e.snapshot.data&&(o={...o,...e.snapshot.data}),e.snapshot.memo?.dataMeta&&(i=e.snapshot.memo.dataMeta)),Object.keys(o).length>0){const e=i.locked||[],n=i.models||{},s=i.lazy||[],r=i.reactive||[];Object.entries(o).forEach((([o,i])=>{let a=typeof i;null===i&&(a="null"),Array.isArray(i)&&(a="array"),i instanceof Date&&(a="date");let c=0;try{c=JSON.stringify(i).length}catch(l){c=-1}t[o]={value:i,type:a,size:c,locked:e.includes(o),isModel:n.hasOwnProperty(o),isLazy:s.includes(o),isReactive:r.includes(o),isId:"id"===o.toLowerCase()||o.toLowerCase().endsWith("_id"),path:o}}))}return t},storeInitialCommit(){window.Livewire.all().forEach((e=>{this.commits.push({id:this.randomId(),initial:!0,current:!0,componentId:e.id,calls:null,size:null,snapshot:e.snapshotEncoded,effects:{returns:[],html:e.el.outerHTML.toString()},updates:null,duration:null})}))},setupEventListeners(){window.Livewire&&(window.Livewire.hook("component.init",(({component:e})=>{this.trackLifecycleEvent(e.id,"init",{name:e.name})})),window.Livewire.hook("element.init",(({component:e})=>{this.trackLifecycleEvent(e.id,"element.init")})),window.Livewire.hook("component.hydrate",(({component:e})=>{this.trackLifecycleEvent(e.id,"hydrate")})),window.Livewire.hook("component.dehydrate",(({component:e})=>{this.trackLifecycleEvent(e.id,"dehydrate")})),window.Livewire.hook("element.updating",(({component:e,cleanup:t})=>{this.trackLifecycleEvent(e.id,"updating")})),window.Livewire.hook("element.updated",(({component:e})=>{this.trackLifecycleEvent(e.id,"updated"),setTimeout((()=>this.detectComponents()),100)})),window.Livewire.hook("message.sent",(({component:e,message:t})=>{this.trackLifecycleEvent(e.id,"message.sent",{calls:t.updates,payload:t})})),window.Livewire.hook("message.received",(({component:e,message:t})=>{this.trackLifecycleEvent(e.id,"message.received",{response:t})})),window.Livewire.hook("message.failed",(({component:e,message:t})=>{this.trackLifecycleEvent(e.id,"message.failed",{error:t})})),window.Livewire.hook("commit",(({component:e,commit:t,succeed:o})=>{const i=performance.now();o((({snapshot:o,effects:n})=>{let s=Math.round(new Blob([JSON.stringify({snapshot:o,effects:n})]).size/1024*100)/100;const r=performance.now(),a=this.randomId();this.commits.push({id:a,initial:!1,current:!1,componentId:e.id,calls:t.calls,size:s,snapshot:o,effects:n,updates:t.updates,duration:Math.round(r-i)}),this.setComponentCurrentCommit(a),this.detectComponents()}))})))},getEvents(){return this.commits.filter((e=>e.effects?.dispatches)).map((e=>e.effects.dispatches.map((t=>({...t,id:this.randomId(),commitId:e.id,component:this.getComponentById(e.componentId),timestamp:Date.now(),type:"dispatched"}))))).flat().reverse()},eventSearch:"",eventTypeFilter:"all",expandedEvents:{},eventReplayStatus:null,getFilteredEvents(){let e=this.getEvents();if("all"!==this.eventTypeFilter&&(e=e.filter((e=>"error"===this.eventTypeFilter?!0===e.error:e.type===this.eventTypeFilter))),this.eventSearch){const t=this.eventSearch.toLowerCase();e=e.filter((e=>{if((e.name||e.event||"").toLowerCase().includes(t))return!0;if((e.component?.name||"").toLowerCase().includes(t))return!0;try{return JSON.stringify(e.params).toLowerCase().includes(t)}catch(o){return e.params&&"object"==typeof e.params}}))}return e},getEventsByType(e){const t=this.getEvents();return"error"===e?t.filter((e=>!0===e.error)):t.filter((t=>t.type===e))},getUniqueEventNames(){const e=this.getEvents(),t=new Set(e.map((e=>e.name||e.event)));return Array.from(t)},getAverageEventTime(){const e=this.getEvents().filter((e=>e.duration));if(0===e.length)return 0;const t=e.reduce(((e,t)=>e+t.duration),0);return Math.round(t/e.length)},getGroupedEvents(){const e=Date.now(),t={};return this.getFilteredEvents().forEach((o=>{const i=o.timestamp||e,n=e-i;let s="Just now";n>36e5?s=`${Math.floor(n/36e5)} hours ago`:n>6e4?s=`${Math.floor(n/6e4)} minutes ago`:n>5e3&&(s=`${Math.floor(n/1e3)} seconds ago`),t[s]||(t[s]=[]),t[s].push(o)})),Object.entries(t).map((([e,t])=>({label:e,events:t})))},formatEventTime:e=>new Date(e).toLocaleTimeString(),formatParamValue(e){if(null===e)return"null";if(void 0===e)return"undefined";if("object"==typeof e)try{return JSON.stringify(e)}catch(t){if(Array.isArray(e))return`[Array(${e.length})]`;const o=Object.keys(e);return o.length>5?`{${o.slice(0,5).join(", ")}, ...}`:`{${o.join(", ")}}`}return String(e)},getParamType:e=>null===e?"null":Array.isArray(e)?"array":typeof e,cleanEventForExport(e){const t={id:e.id,name:e.name||e.event,type:e.type,params:e.params||[],timestamp:e.timestamp,commitId:e.commitId,component:e.component?{id:e.component.id,name:e.component.name}:null};return e.duration&&(t.duration=e.duration),e.error&&(t.error=e.error),e.caller_method&&(t.caller_method=e.caller_method),t},copyEventData(e){const t=this.cleanEventForExport(e);navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.showNotification("Event data copied to clipboard")},initEditFields(e){const t=this.$el.querySelector('[x-data*="editing"]');t&&t.__x&&(t.__x.getUnobservedData().editFields=this.flattenEventParams(e.params||{}))},flattenEventParams(e,t=""){let o=[];return Object.entries(e||{}).forEach((([e,i])=>{const n=t?`${t}.${e}`:e;o.push({path:n,value:i,type:this.getParamType(i),key:e})})),o},saveAndReplayEvent(e){const t=this.$el.querySelector('[x-data*="editing"]');if(t&&t.__x){const o=t.__x.getUnobservedData().editFields,i={};o.forEach((e=>{i[e.key]=e.value})),e.params=i,t.__x.getUnobservedData().editing=!1,this.replayEvent(e)}},clearEvents(){this.commits=this.commits.map((e=>({...e,effects:{...e.effects,dispatches:[]}}))),this.showNotification("All events cleared")},exportEvents(){const e=this.getEvents().map((e=>this.cleanEventForExport(e))),t=JSON.stringify({events:e,exported_at:(new Date).toISOString(),total_count:e.length},null,2),o="data:application/json;charset=utf-8,"+encodeURIComponent(t),i=`livewire-events-${Date.now()}.json`,n=document.createElement("a");n.setAttribute("href",o),n.setAttribute("download",i),n.click(),this.showNotification("Events exported successfully")},getAffectedComponents(e){return Object.values(this.components).filter((t=>e.component?.id===t.id))},getAffectedComponentsDescription(e){const t=this.getAffectedComponents(e);return 0===t.length?"No components were directly affected by this event.":`This event affected ${t.length} component(s): ${t.map((e=>e.name)).join(", ")}`},getRelatedMethods:e=>[],getRelatedMethodsDescription(e){const t=this.getRelatedMethods(e);return 0===t.length?"No methods were triggered by this event.":`This event triggered ${t.length} method(s).`},getModifiedProperties:e=>[],getModifiedPropertiesDescription(e){const t=this.getModifiedProperties(e);return 0===t.length?"No properties were modified by this event.":`This event modified ${t.length} property/properties.`},copyRawData(e){const t=this.cleanEventForExport(e);navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.showNotification("Raw data copied to clipboard")},downloadRawData(e){const t=this.cleanEventForExport(e),o=JSON.stringify(t,null,2),i="data:application/json;charset=utf-8,"+encodeURIComponent(o),n=`event-${e.id}-${Date.now()}.json`,s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",n),s.click(),this.showNotification("Event data downloaded")},getDefaultValueForType(e){switch(e){case"boolean":return!1;case"number":return 0;case"string":return"";default:return null}},filterEvents(){},activeComponentCommits(){return this.getComponentCommitsById(this.activeComponentId)},getComponentCommitsById(e){return e?this.commits.filter((t=>t.componentId===e)).reverse():[]},getLastComponentCommitById(e){return this.getComponentCommitsById(e)[0]??null},getComponentActiveCommit(e){return this.getComponentCommitsById(e).find((e=>!0===e.current))??null},setComponentCurrentCommit(e){let t=this.commits.find((t=>t.id===e));if(!t)return;let o=t.componentId;this.commits.forEach((t=>{t.componentId===o&&(t.current=t.id===e)}))},updateProperty(e,t,o){try{const n=JSON.parse(o),s=this.components[e];if(!s)return void console.error("Component not found:",e);if(s.properties[t]&&(s.properties[t].value=n,s.properties[t].size=JSON.stringify(n).length,s.properties[t].type=Array.isArray(n)?"array":typeof n),window.Livewire){const o=window.Livewire.find(e);if(o)try{o.$wire&&"function"==typeof o.$wire.set?o.$wire.set(t,n):o.$wire&&void 0!==o.$wire[t]?o.$wire[t]=n:o.data&&void 0!==o.data[t]?o.data[t]=n:console.warn(`Could not update property ${t} on component ${e}`)}catch(i){console.error("Error updating Livewire component:",i)}}}catch(i){console.error("Failed to update property:",i),alert("Invalid JSON value. Please check your syntax.")}},refreshComponent(e){if(window.Livewire){const t=window.Livewire.find(e);t&&(t.$wire&&"function"==typeof t.$wire.refresh?t.$wire.refresh():t.$wire&&"function"==typeof t.$wire.$refresh?t.$wire.$refresh():"function"==typeof t.call?t.call("$refresh"):this.detectComponents())}},refreshAllComponents(){Object.keys(this.components).forEach((e=>{this.refreshComponent(e)})),this.showNotification("🔄 All components refreshed","success")},getComponentById:e=>window.Livewire.all().find((t=>t.id===e)),randomId:()=>Math.random().toString(36).substring(7),getTotalProperties(){return Object.values(this.components).reduce(((e,t)=>e+Object.keys(t.properties||{}).length),0)},getTotalDataSize(){return(Object.values(this.components).reduce(((e,t)=>e+Object.values(t.properties||{}).reduce(((e,t)=>e+(t.size||0)),0)),0)/1024).toFixed(1)},getComponentDataSize:e=>(Object.values(e.properties||{}).reduce(((e,t)=>e+(t.size||0)),0)/1024).toFixed(1),getPropertyCountStatus(e){const t=Object.keys(e.properties||{}).length,o=this.config.performance?.max_properties||50;return t>=o?"error":t>=.8*o?"warning":"ok"},getDataSizeStatus(e){const t=parseFloat(this.getComponentDataSize(e)),o=this.config.performance?.max_data_size||256;return t>=o?"error":t>=.8*o?"warning":"ok"},getPerformanceWarnings(e){const t=[],o=Object.keys(e.properties||{}).length,i=parseFloat(this.getComponentDataSize(e)),n=this.config.performance?.max_properties||50;o>=n?t.push({type:"property_count",level:"error",message:`Too many properties (${o}/${n}). Consider reducing component state.`}):o>=.8*n&&t.push({type:"property_count",level:"warning",message:`High property count (${o}/${n}). Monitor component complexity.`});const s=this.config.performance?.max_data_size||256;return i>=s?t.push({type:"data_size",level:"error",message:`Component data too large (${i}KB/${s}KB). Optimize data structure.`}):i>=.8*s&&t.push({type:"data_size",level:"warning",message:`Large component data (${i}KB/${s}KB). Consider optimization.`}),Object.entries(e.properties||{}).forEach((([e,o])=>{o.isId&&!o.locked&&t.push({type:"unlocked_id",level:"error",message:`Unlocked ID property "${e}" poses security and performance risks.`})})),t},getLargeProperties(e){const t=1024*(this.config.performance?.property_warning_size||10);return Object.entries(e.properties||{}).map((([e,t])=>({name:e,...t}))).filter((e=>e.size>=t)).sort(((e,t)=>t.size-e.size))},getPerformanceIssueCount(){return Object.values(this.components).reduce(((e,t)=>e+this.getPerformanceWarnings(t).filter((e=>"error"===e.level)).length),0)},getPerformanceWarningCount(){return Object.values(this.components).reduce(((e,t)=>e+this.getPerformanceWarnings(t).filter((e=>"warning"===e.level)).length),0)},togglePosition(){const e=["bottom","top","left","right"],t=(e.indexOf(this.position)+1)%e.length;this.position=e[t],this.savePreferences()},toggleSettings(){this.showSettings=!this.showSettings},resetPosition(){this.position="bottom",this.savePreferences()},loadPreferences(){const e=localStorage.getItem("livewire-debugbar-position");e&&["bottom","top","left","right"].includes(e)&&(this.position=e);const t=localStorage.getItem("livewire-debugbar-collapsed");null!==t&&(this.collapsed="true"===t);const o=localStorage.getItem("livewire-debugbar-height");o&&(this.height=parseInt(o))},savePreferences(){localStorage.setItem("livewire-debugbar-position",this.position),localStorage.setItem("livewire-debugbar-collapsed",this.collapsed.toString())},setupKeyboardShortcuts(){this.config.interface?.keyboard_shortcuts&&document.addEventListener("keydown",(e=>{if((e.ctrlKey||e.metaKey)&&e.shiftKey&&"D"===e.key&&(e.preventDefault(),this.toggleCollapse()),(e.ctrlKey||e.metaKey)&&e.shiftKey)switch(e.key){case"1":e.preventDefault(),this.activeTab="components";break;case"2":e.preventDefault(),this.activeTab="events";break;case"3":e.preventDefault(),this.activeTab="performance";break;case"4":e.preventDefault(),this.activeTab="security"}}))},setupHotReload(){if(!this.config.hot_reload?.enabled)return;"true"===localStorage.getItem("livewire-debugbar-hot-reload")&&this.startHotReload()},startHotReload(){if(this.hotReloadInterval)return;this.hotReload=!0;const e=this.config.hot_reload?.interval||3e3;this.hotReloadInterval=window.setInterval((()=>{if(this.detectComponents(),this.activeComponentId){const e=this.getComponentById(this.activeComponentId);e&&e.$wire.$refresh()}}),e),localStorage.setItem("livewire-debugbar-hot-reload","true")},stopHotReload(){this.hotReloadInterval&&(clearInterval(this.hotReloadInterval),this.hotReloadInterval=null),this.hotReload=!1,localStorage.setItem("livewire-debugbar-hot-reload","false")},toggleHotReload(){this.hotReload?this.stopHotReload():this.startHotReload()},startResize(e){this.isResizing=!0,this.initialY=e.clientY,this.initialHeight=this.height,document.addEventListener("mousemove",this.handleResize.bind(this)),document.addEventListener("mouseup",this.stopResize.bind(this)),e.preventDefault()},handleResize(e){if(!this.isResizing)return;const t=this.initialY-e.clientY,o=Math.max(200,Math.min(800,this.initialHeight+t));this.height=o;const i=document.querySelector(".livewire-debugbar");i&&(i.style.height=`${o}px`)},stopResize(){this.isResizing=!1,document.removeEventListener("mousemove",this.handleResize.bind(this)),document.removeEventListener("mouseup",this.stopResize.bind(this)),localStorage.setItem("livewire-debugbar-height",this.height.toString())},replayEvent(e){if(!window.Livewire)return;const t=e.name||e.event,o=e.params||[];if(e.component&&e.component.id){const i=window.Livewire.find(e.component.id);if(i&&i.$wire&&i.$wire.$dispatch)return i.$wire.$dispatch(t,...o),void console.log(`Event "${t}" replayed from component ${e.component.name}`)}window.Livewire.dispatch(t,...o),console.log(`Event "${t}" replayed globally`)},getComponentValidationErrors(e){return this.validationErrors[e]||[]},getComponentStateHistory(e){return this.stateHistory[e]||[]},exportComponentData(e){const t=this.components[e];if(!t)return;const o={component:{id:e,name:t.name,state:t.state,properties:t.properties,updates:t.updates||[],snapshot:t.snapshot||null,memo:t.memo||{},checksum:t.checksum||null},stateHistory:this.getComponentStateHistory(e),validationErrors:this.getComponentValidationErrors(e),lifecycleEvents:this.getComponentLifecycleEvents(e),commits:this.getComponentCommitsById(e),timestamp:(new Date).toISOString()},i=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`livewire-component-${t.name}-${e}.json`,s.click(),URL.revokeObjectURL(n),this.showNotification(`📁 Component data exported: ${t.name}`,"success"),console.log("📁 Component data exported:",e)},generateTestCode(e){const t=this.components[e];if(!t)return;const o=Object.entries(t.properties).map((([e,t])=>`        '${e}' => ${JSON.stringify(t.value)}`)).join(",\n"),i=`\n<?php\n\nuse Livewire\\Livewire;\n\ntest('${t.name} component renders and functions correctly', function () {\n    // Test initial render\n    Livewire::test(${t.name}::class, [\n${o}\n    ])\n    ->assertStatus(200)\n    ->assertSee('expected content');\n\n    // Test property updates\n${Object.keys(t.properties).map((e=>`    // ->set('${e}', 'new value')\n    // ->assertSet('${e}', 'new value')`)).join("\n")}\n\n    // Test method calls\n    // ->call('methodName')\n    // ->assertEmitted('eventName');\n});\n            `;navigator.clipboard.writeText(i.trim()).then((()=>{this.showNotification("📋 Test code copied to clipboard","success"),console.log("📋 Test code copied to clipboard")})).catch((()=>{this.showNotification("Failed to copy test code","error")}))},getPerformanceInsights(){const e=Object.keys(this.components).length,t=Object.values(this.components).reduce(((e,t)=>e+Object.keys(t.properties).length),0),o=t/e||0,i=Object.entries(this.components).map((([e,t])=>({id:e,name:t.name,propertyCount:Object.keys(t.properties).length,dataSize:Object.values(t.properties).reduce(((e,t)=>e+t.size),0)}))).sort(((e,t)=>t.dataSize-e.dataSize)).slice(0,5);return{totalComponents:e,totalProperties:t,averageProperties:Math.round(10*o)/10,largestComponents:i,totalValidationErrors:Object.values(this.validationErrors).flat().length,criticalErrors:Object.values(this.validationErrors).flat().filter((e=>"critical"===e.level)).length}},toggleRealTimeValidation(){this.realTimeValidation=!this.realTimeValidation,localStorage.setItem("livewire-debugbar-real-time-validation",this.realTimeValidation.toString()),this.realTimeValidation?Object.entries(this.components).forEach((([e,t])=>{this.validateComponentProperties(e,t.properties)})):this.validationErrors={}},toggleStateChangeNotifications(){this.stateChangeNotifications=!this.stateChangeNotifications,localStorage.setItem("livewire-debugbar-state-notifications",this.stateChangeNotifications.toString())},compareComponentStates(e,t,o){const i=this.stateHistory[e];if(!i)return null;const n=i.find((e=>e.id===t)),s=i.find((e=>e.id===o));if(!n||!s)return null;const r=[];return new Set([...Object.keys(n.state),...Object.keys(s.state)]).forEach((e=>{const t=n.state[e],o=s.state[e];JSON.stringify(t)!==JSON.stringify(o)&&r.push({property:e,before:t,after:o,type:void 0===t?"added":void 0===o?"removed":"changed"})})),{state1:n,state2:s,differences:r,changeCount:r.length}},filterComponents(){},sortedComponents(){let e=Object.entries(this.components);if(this.componentSearch){const t=this.componentSearch.toLowerCase();e=e.filter((([e,o])=>o.name.toLowerCase().includes(t)||e.toLowerCase().includes(t)))}return this.componentStateFilter&&(e=e.filter((([e,t])=>t.state===this.componentStateFilter))),this.componentValidationFilter&&(e=e.filter((([e,t])=>{const o=this.getComponentValidationErrors(e);switch(this.componentValidationFilter){case"valid":return 0===o.length;case"warnings":return o.some((e=>"warning"===e.level));case"errors":return o.some((e=>"critical"===e.level||"error"===e.level));default:return!0}}))),e.sort((([e,t],[o,i])=>{switch(this.componentSort){case"properties":return Object.keys(i.properties||{}).length-Object.keys(t.properties||{}).length;case"size":const e=Object.values(t.properties||{}).reduce(((e,t)=>e+t.size),0);return Object.values(i.properties||{}).reduce(((e,t)=>e+t.size),0)-e;case"performance":const o=this.getPerformanceWarnings(t).length;return this.getPerformanceWarnings(i).length-o;default:return t.name.localeCompare(i.name)}})),e},focusComponent(e){const t=this.components[e];if(!t||!t.element)return;t.element.scrollIntoView({behavior:"smooth",block:"center"});const o=t.element.style.outline;t.element.style.outline="3px solid #3B82F6",t.element.style.outlineOffset="2px",setTimeout((()=>{t.element.style.outline=o}),2e3),console.log(`🎯 Focused on component: ${t.name}`)},copyComponentPath(e){const t=`app/Http/Livewire/${e.split(".").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("/")}.php`;navigator.clipboard.writeText(t).then((()=>{this.showNotification(`📋 Path copied: ${t}`,"success"),console.log(`📋 Copied path: ${t}`)})).catch((()=>{this.showNotification("Failed to copy component path","error")}))},removeFilter(e){const t=this.activeFilters.indexOf(e);t>-1&&this.activeFilters.splice(t,1)},getComponentTree(){const e={},t={};return Object.entries(this.components).forEach((([e,o])=>{t[e]={component:o,children:[]}})),Object.entries(this.components).forEach((([o,i])=>{if(i.element){let n=i.element.parentElement,s=null;for(;n&&!s;){const e=Array.from(n.attributes||[]).find((e=>"wire:id"===e.name))?.value;if(e&&t[e]){s=t[e],s.children.push(o);break}n=n.parentElement}s||(e[o]=t[o])}})),e},hasChildren(e){const t=this.components[e];return!(!t||!t.element)&&Object.values(this.components).some((t=>{if(!t.element||t.id===e)return!1;let o=t.element.parentElement;for(;o;){const t=Array.from(o.attributes||[]).find((e=>"wire:id"===e.name))?.value;if(t===e)return!0;o=o.parentElement}return!1}))},toggleTreeNode(e){this.expandedTreeNodes[e]=!this.expandedTreeNodes[e]},componentMatchesSearch(e){if(!this.componentSearch)return!0;const t=this.componentSearch.toLowerCase();return e.name.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)},toggleCollapse(){this.collapsed=!this.collapsed,this.savePreferences()},showNotification(e,t="info"){const o=document.createElement("div");o.className="ldb-notification";const i={success:{bg:"#10B981",text:"white"},error:{bg:"#EF4444",text:"white"},warning:{bg:"#F59E0B",text:"black"},info:{bg:"#3B82F6",text:"white"}}[t];o.style.cssText=`\n                position: fixed;\n                bottom: 20px;\n                right: 20px;\n                background: ${i.bg};\n                color: ${i.text};\n                padding: 12px 20px;\n                border-radius: 8px;\n                font-family: var(--ldb-font-sans);\n                font-size: 14px;\n                font-weight: 500;\n                z-index: 999999;\n                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n                border: 1px solid rgba(255, 255, 255, 0.1);\n                max-width: 400px;\n                transform: translateX(100%);\n                transition: transform 0.3s ease;\n            `,o.textContent=e,document.body.appendChild(o),requestAnimationFrame((()=>{o.style.transform="translateX(0)"})),setTimeout((()=>{o.style.transform="translateX(100%)",setTimeout((()=>{o.parentNode&&o.remove()}),300)}),4e3),o.addEventListener("click",(()=>{o.style.transform="translateX(100%)",setTimeout((()=>{o.parentNode&&o.remove()}),300)}))},eventStatistics:{total:0,byType:{},byComponent:{},avgPayloadSize:0,peakTime:null,replays:{}},showEventEditor:!1,editingEvent:null,autoRefresh:!1,toggleEventDetails(e){const t=document.getElementById(`event-details-${e}`);t&&t.classList.toggle("hidden")},editEvent(e){const t=this.events.find((t=>t.id===e));t&&(this.editingEvent=JSON.parse(JSON.stringify(t)),this.showEventEditor=!0)},saveEventEdit(){if(!this.editingEvent)return;const e=this.events.findIndex((e=>e.id===this.editingEvent.id));-1!==e&&(this.events[e]=JSON.parse(JSON.stringify(this.editingEvent)),this.showNotification(window.livewireDebugbarTranslations?.event_updated||"Event updated","success")),this.showEventEditor=!1,this.editingEvent=null},cancelEventEdit(){this.showEventEditor=!1,this.editingEvent=null},deleteEvent(e){const t=this.events.findIndex((t=>t.id===e));-1!==t&&(this.events.splice(t,1),this.showNotification(window.livewireDebugbarTranslations?.event_deleted||"Event deleted","success"))},async importEvents(e){const t=e.target;if(t.files&&t.files[0]){try{const e=await t.files[0].text(),o=JSON.parse(e);if(!o.events||!Array.isArray(o.events))throw new Error("Invalid format");this.events=[...this.events,...o.events],this.showNotification(window.livewireDebugbarTranslations?.events_imported||"Events imported successfully","success")}catch(o){this.showNotification(window.livewireDebugbarTranslations?.import_error||"Failed to import events","error")}t.value=""}},updateEventStatistics(){const e=this.getEvents();if(!e.length)return void(this.eventStatistics={total:0,byType:{},byComponent:{},avgPayloadSize:0,peakTime:null,replays:this.eventStatistics.replays||{}});const t={total:e.length,byType:{},byComponent:{},avgPayloadSize:0,peakTime:null,replays:this.eventStatistics.replays||{}};let o=0;const i={};e.forEach((e=>{const n=e.name||e.event||"Unknown";t.byType[n]=(t.byType[n]||0)+1,e.component&&e.component.name&&(t.byComponent[e.component.name]=(t.byComponent[e.component.name]||0)+1);const s=e.params||e.payload||[];o+=JSON.stringify(s).length;const r=e.timestamp||Date.now(),a=`${new Date(r).getHours()}:00`;i[a]=(i[a]||0)+1})),t.avgPayloadSize=Math.round(o/e.length);let n=0;Object.entries(i).forEach((([e,o])=>{o>n&&(n=o,t.peakTime=e)})),this.eventStatistics=t},initializeEventTab(){this.updateEventStatistics(),this.autoRefresh&&setInterval((()=>{"events"===this.activeTab&&this.updateEventStatistics()}),5e3)},updateEditField(e,t,o){this.editFields[e]||(this.editFields[e]={type:o});let i=t;switch(o){case"number":i=parseFloat(t);break;case"boolean":i="true"===t;break;case"object":case"array":try{i=JSON.parse(t)}catch(n){}}this.editFields[e].value=i},addNewParam(){const e=`param_${Date.now()}`;this.editFields[e]={value:"",type:"string",isNew:!0}},removeParam(e){delete this.editFields[e]},getQueryCount:()=>0,getAverageRenderTime(){const e=this.commits.filter((e=>e.duration));if(0===e.length)return 0;const t=e.reduce(((e,t)=>e+t.duration),0);return Math.round(t/e.length)},exportPerformanceData(){const e={timestamp:(new Date).toISOString(),summary:{totalComponents:Object.keys(this.components).length,totalProperties:this.getTotalProperties(),totalMemory:this.getTotalDataSize()+" KB",totalEvents:this.getEvents().length,averageRenderTime:this.getAverageRenderTime()+" ms",averagePropertiesPerComponent:Math.round(this.getTotalProperties()/Object.keys(this.components).length)},components:Object.entries(this.components).map((([e,t])=>({id:e,name:t.name,properties:Object.keys(t.properties).length,memory:this.getComponentDataSize(t)+" KB",warnings:this.getPerformanceWarnings(t).length,status:this.getPropertyCountStatus(t),largeProperties:this.getLargeProperties(t).map((e=>({name:e.name,size:(e.size/1024).toFixed(1)+" KB",type:e.type})))}))),warnings:this.getAllPerformanceWarnings(),thresholds:this.config.thresholds||{},lifecycleEvents:this.lifecycleEvents.slice(-50)},t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(o),n=document.createElement("a");n.href=i,n.download=`livewire-performance-report-${Date.now()}.json`,n.click(),URL.revokeObjectURL(i),this.showNotification("Performance report exported","success")},getAllPerformanceWarnings(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{const i=this.getPerformanceWarnings(o);i.length>0&&e.push({componentId:t,componentName:o.name,warnings:i})})),e},isScanning:!1,lastScanTime:null,securityIssues:[],auditLog:[],auditLogFilter:"all",getSecurityIssues(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{Object.entries(o.properties).forEach((([i,n])=>{n.locked||(i.toLowerCase().includes("id")||"id"===i?e.push({id:`${t}-${i}-unlocked-id`,level:"critical",title:"Unlocked ID Property",message:`The property "${i}" is an ID field that should be locked to prevent manipulation`,component:o.name,property:i,fixable:!0}):this.isSensitivePropertyName(i)&&e.push({id:`${t}-${i}-unlocked-sensitive`,level:"high",title:"Unlocked Sensitive Property",message:`The property "${i}" appears to contain sensitive data and should be locked`,component:o.name,property:i,fixable:!0})),this.containsSensitiveData(n.value)&&e.push({id:`${t}-${i}-exposed`,level:"high",title:"Exposed Sensitive Data",message:`The property "${i}" contains potentially sensitive information that should not be exposed`,component:o.name,property:i,fixable:!1})}));const i=Object.keys(o.properties).length;i>30&&e.push({id:`${t}-too-many-props`,level:"medium",title:"Excessive Property Count",message:`Component has ${i} properties. Consider refactoring to reduce exposed data`,component:o.name,fixable:!1})})),e},getUnlockedProperties(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{Object.entries(o.properties).forEach((([i,n])=>{n.locked||e.push({id:`${t}-${i}`,component:o.name,property:i,type:n.type,value:n.value,isId:i.toLowerCase().includes("id")||"id"===i,isSensitive:this.isSensitivePropertyName(i),recommendations:this.getPropertyRecommendations(i,n)})}))})),e},getSensitiveData(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{Object.entries(o.properties).forEach((([i,n])=>{const s=this.detectSensitivePattern(n.value);s&&e.push({id:`${t}-${i}`,component:o.name,property:i,pattern:s,reason:this.getSensitiveDataReason(s),recommendation:this.getSensitiveDataRecommendation(s)})}))})),e},getSecurityScore(){const e=this.getSecurityIssues();let t=100;return t-=20*e.filter((e=>"critical"===e.level)).length,t-=10*e.filter((e=>"high"===e.level)).length,t-=5*e.filter((e=>"medium"===e.level)).length,Math.max(0,t)},getSecurityScoreClass(){const e=this.getSecurityScore();return e>=90?"excellent":e>=70?"good":e>=50?"fair":e>=30?"poor":"critical"},getSecurityScoreDescription(){const e=this.getSecurityScore();return e>=90?"Your components have excellent security practices":e>=70?"Good security, but some improvements recommended":e>=50?"Fair security, several issues need attention":e>=30?"Poor security, immediate action required":"Critical security issues detected, urgent fixes needed"},runSecurityScan(){this.isScanning=!0,this.auditLog.unshift({id:Date.now(),type:"Security Scan Started",level:"info",time:(new Date).toLocaleTimeString(),message:"Manual security scan initiated"}),setTimeout((()=>{this.detectComponents();const e=this.getSecurityIssues(),t=e.filter((e=>"critical"===e.level)).length,o=e.filter((e=>"high"===e.level)).length;this.auditLog.unshift({id:Date.now(),type:"Scan Complete",level:t>0?"critical":o>0?"warning":"info",time:(new Date).toLocaleTimeString(),message:`Found ${t} critical and ${o} high risk issues`}),this.isScanning=!1,this.lastScanTime=(new Date).toLocaleTimeString(),t>0&&this.showNotification(`⚠️ ${t} critical security issues found!`,"error")}),1e3)},fixAllSecurityIssues(){const e=this.getSecurityIssues().filter((e=>e.fixable));let t=0;e.forEach((e=>{this.fixSecurityIssue(e)&&t++})),this.showNotification(`🔧 Fixed ${t} security issues`,"success"),this.runSecurityScan()},fixSecurityIssue(e){return this.auditLog.unshift({id:Date.now(),type:"Issue Fixed",level:"info",time:(new Date).toLocaleTimeString(),message:`Fixed: ${e.title} in ${e.component}`}),!0},viewSecurityIssueDetails(e){this.activeTab="components",this.componentSearch=e.component,this.showNotification(`Showing details for: ${e.title}`,"info")},exportSecurityReport(){const e={timestamp:(new Date).toISOString(),score:this.getSecurityScore(),summary:{critical:this.getSecurityIssues().filter((e=>"critical"===e.level)).length,high:this.getSecurityIssues().filter((e=>"high"===e.level)).length,medium:this.getSecurityIssues().filter((e=>"medium"===e.level)).length,unlockedProperties:this.getUnlockedProperties().length,sensitiveExposures:this.getSensitiveData().length},issues:this.getSecurityIssues(),unlockedProperties:this.getUnlockedProperties(),sensitiveData:this.getSensitiveData(),recommendations:this.getSecurityRecommendations(),auditLog:this.auditLog.slice(0,50)},t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(o),n=document.createElement("a");n.href=i,n.download=`livewire-security-report-${Date.now()}.json`,n.click(),URL.revokeObjectURL(i),this.showNotification("🔒 Security report exported","success")},lockAllProperties(){let e=0;Object.values(this.components).forEach((t=>{Object.values(t.properties).forEach((t=>{t.locked||(t.locked=!0,e++)}))})),this.showNotification(`🔒 Locked ${e} properties`,"success"),this.runSecurityScan()},clearSecurityCache(){this.auditLog=[],this.lastScanTime=null,this.showNotification("🗑️ Security cache cleared","info")},getXSSVulnerabilities(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{Object.entries(o.properties).forEach((([i,n])=>{"string"==typeof n.value&&this.containsXSSPattern(n.value)&&e.push({id:`${t}-${i}-xss`,component:o.name,property:i,description:"Potential XSS vulnerability in unescaped string"})}))})),e},getSQLInjectionRisks(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{Object.entries(o.properties).forEach((([i,n])=>{"string"==typeof n.value&&this.containsSQLPattern(n.value)&&e.push({id:`${t}-${i}-sql`,component:o.name,query:i,reason:"User input may be directly used in SQL query"})}))})),e},getCSRFStatus(){const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return{status:e?"valid":"invalid",label:e?"Protected":"Not Protected",token:e?e.substring(0,20)+"...":"Not Found",expires:"2 hours",verified:!0,requestCount:this.commits.length}},getPermissionMatrix(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{["mount","save","delete","update"].forEach((i=>{e.push({id:`${t}-${i}`,component:o.name,method:i,hasAuthorization:Math.random()>.3,hasValidation:Math.random()>.2,isSecure:Math.random()>.4})}))})),e},getFilteredAuditLog(){return"all"===this.auditLogFilter?this.auditLog:"critical"===this.auditLogFilter?this.auditLog.filter((e=>"critical"===e.level)):"warnings"===this.auditLogFilter?this.auditLog.filter((e=>"warning"===e.level)):this.auditLog},clearAuditLog(){this.auditLog=[],this.showNotification("Audit log cleared","info")},isSensitivePropertyName(e){const t=e.toLowerCase();return["password","secret","token","key","auth","credential","ssn","credit","card","cvv","pin","private"].some((e=>t.includes(e)))},containsSensitiveData(e){if("string"!=typeof e)return!1;return[/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/,/\b\d{3}-\d{2}-\d{4}\b/,/Bearer\s+[A-Za-z0-9\-._~\+\/]+=*/,/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/].some((t=>t.test(e)))},detectSensitivePattern:e=>"string"!=typeof e?null:/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/.test(e)?"Credit Card":/\b\d{3}-\d{2}-\d{4}\b/.test(e)?"SSN":/Bearer\s+[A-Za-z0-9\-._~\+\/]+=*/.test(e)?"API Token":/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/.test(e)?"Email":null,getSensitiveDataReason:e=>({"Credit Card":"Credit card numbers should never be exposed in component properties",SSN:"Social Security Numbers are highly sensitive and must be protected","API Token":"API tokens can be used to access protected resources",Email:"Email addresses are personal data that should be handled carefully"}[e]||"This data appears to be sensitive"),getSensitiveDataRecommendation:e=>({"Credit Card":"Use tokenization and handle payment data server-side only",SSN:"Mask SSNs and never expose full numbers to the client","API Token":"Store tokens securely server-side and use session-based auth",Email:"Consider if email display is necessary, use hashing when possible"}[e]||"Remove or encrypt this sensitive data"),getPropertyRecommendations(e,t){const o=[];return e.toLowerCase().includes("id")&&o.push("Always use #[Locked] attribute on ID properties"),this.isSensitivePropertyName(e)&&(o.push("Lock this property to prevent client-side modification"),o.push("Consider if this data needs to be exposed at all")),"array"===t.type&&t.value&&t.value.length>100&&o.push("Large arrays should be paginated or loaded on demand"),o},containsXSSPattern:e=>[/<script[^>]*>.*?<\/script>/gi,/<iframe[^>]*>.*?<\/iframe>/gi,/javascript:/gi,/on\w+\s*=/gi].some((t=>t.test(e))),containsSQLPattern:e=>[/(\b(SELECT|INSERT|UPDATE|DELETE|DROP|UNION|WHERE|FROM)\b)/gi,/('|(\')|"|(\"))\s*(OR|AND)\s*('|(\')|"|(\"))?(\d|[a-zA-Z])/gi,/\b(1=1|1=2)\b/gi].some((t=>t.test(e))),getSecurityRecommendations:()=>[{title:"Use Property Locking",description:"Always lock sensitive properties using the #[Locked] attribute",priority:"high"},{title:"Validate All Inputs",description:"Implement proper validation rules for all user inputs",priority:"high"},{title:"Minimize Data Exposure",description:"Only expose necessary data in component properties",priority:"medium"},{title:"Use Authorization",description:"Implement proper authorization checks in component methods",priority:"high"}],consoleLogs:[],inspectorSearch:"",generatorType:"test",selectedComponentForGeneration:null,clearAllData(){confirm("Are you sure you want to clear all debugging data? This cannot be undone.")&&(this.components={},this.events=[],this.commits=[],this.performance=[],this.stateHistory={},this.validationErrors={},this.lifecycleEvents=[],this.componentQueries={},this.consoleLogs=[],this.auditLog=[],localStorage.removeItem("livewire-debugbar-position"),localStorage.removeItem("livewire-debugbar-collapsed"),localStorage.removeItem("livewire-debugbar-height"),localStorage.removeItem("livewire-debugbar-hot-reload"),localStorage.removeItem("livewire-debugbar-real-time-validation"),localStorage.removeItem("livewire-debugbar-state-notifications"),this.showNotification("🗑️ All debugging data cleared","success"),setTimeout((()=>{this.detectComponents(),this.storeInitialCommit()}),100))},exportAllData(){const e={timestamp:(new Date).toISOString(),version:"1.0.0",environment:{url:window.location.href,userAgent:navigator.userAgent},components:this.components,events:this.getEvents().map((e=>this.cleanEventForExport(e))),commits:this.commits,performance:{summary:this.getPerformanceInsights(),warnings:this.getAllPerformanceWarnings()},security:{score:this.getSecurityScore(),issues:this.getSecurityIssues(),unlockedProperties:this.getUnlockedProperties(),sensitiveData:this.getSensitiveData()},stateHistory:this.stateHistory,validationErrors:this.validationErrors,lifecycleEvents:this.lifecycleEvents,auditLog:this.auditLog},t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(o),n=document.createElement("a");n.href=i,n.download=`livewire-debugbar-complete-export-${Date.now()}.json`,n.click(),URL.revokeObjectURL(i),this.showNotification("📦 Complete debugging data exported","success")},toggleAutoRefresh(){if(this.autoRefresh=!this.autoRefresh,this.autoRefresh){this.showNotification("🔄 Auto-refresh enabled","success");const e=setInterval((()=>{this.autoRefresh?this.detectComponents():clearInterval(e)}),3e3)}else this.showNotification("⏸️ Auto-refresh disabled","info")},clearComponentHistory(e){this.stateHistory[e]&&(delete this.stateHistory[e],this.showNotification("🗑️ Component history cleared","success"))},compareWithCurrent(e,t){const o=this.stateHistory[e];if(!o)return;if(!o.find((e=>e.id===t)))return;if(!this.components[e])return;const i=this.compareComponentStates(e,t,"current");i&&(console.log("📊 State Comparison:",i),this.showNotification(`📊 ${i.changeCount} differences found`,"info"))},viewSnapshotDetails(e,t){const o=this.stateHistory[e];if(!o)return;const i=o.find((e=>e.id===t));i&&(console.log("📸 Snapshot Details:",{component:this.components[e]?.name,timestamp:new Date(i.timestamp).toLocaleString(),state:i.state}),navigator.clipboard.writeText(JSON.stringify(i.state,null,2)).then((()=>{this.showNotification("📋 Snapshot data copied to clipboard","success")})).catch((()=>{this.showNotification("Failed to copy snapshot data","error")})))},filterInspectorResults(){},getFilteredComponents(){let e=Object.entries(this.components);if(this.inspectorSearch){const t=this.inspectorSearch.toLowerCase();e=e.filter((([e,o])=>{if(o.name.toLowerCase().includes(t))return!0;if(e.toLowerCase().includes(t))return!0;if(Object.keys(o.properties||{}).some((e=>e.toLowerCase().includes(t))))return!0;try{if(Object.values(o.properties||{}).map((e=>JSON.stringify(e.value))).join(" ").toLowerCase().includes(t))return!0}catch(i){}return!1}))}return e},inspectComponent(e){const t=this.components[e];t&&(console.group(`🔍 Component Inspector: ${t.name}`),console.log("ID:",e),console.log("Element:",t.element),console.log("Properties:",t.properties),console.log("State History:",this.stateHistory[e]||[]),console.log("Validation Errors:",this.validationErrors[e]||[]),console.log("Lifecycle Events:",this.getComponentLifecycleEvents(e)),console.log("Commits:",this.getComponentCommitsById(e)),console.groupEnd(),this.focusComponent(e),this.showNotification(`🔍 Inspecting: ${t.name} (check console)`,"info"))},cloneComponent(e){const t=this.components[e];if(!t)return;const o=Object.entries(t.properties).map((([e,t])=>`    public $${e} = ${JSON.stringify(t.value)};`)).join("\n"),i=`<?php\n\nnamespace App\\Http\\Livewire;\n\nuse Livewire\\Component;\n\nclass ${t.name}Clone extends Component\n{\n${o}\n\n    public function render()\n    {\n        return view('livewire.${t.name.toLowerCase().replace(/\./g,"-")}-clone');\n    }\n}`;navigator.clipboard.writeText(i).then((()=>{this.showNotification("📋 Component clone code copied to clipboard","success"),console.log("🔧 Component Clone Code:\n",i)})).catch((()=>{this.showNotification("Failed to copy clone code","error")}))},benchmarkComponent(e){const t=this.components[e];if(!t)return;const o=window.Livewire.find(e);if(!o)return;console.group(`⚡ Benchmarking: ${t.name}`);const i=performance.now();Object.keys(t.properties).forEach((e=>{o[e]}));const n=performance.now()-i;console.log(`Property Access Time: ${n.toFixed(2)}ms`);const s=performance.now();o.$refresh().then((()=>{const o=performance.now()-s;console.log(`Refresh Time: ${o.toFixed(2)}ms`);const i={propertyCount:Object.keys(t.properties).length,dataSize:this.getComponentDataSize(t),propertyAccessTime:n.toFixed(2),refreshTime:o.toFixed(2),averageCommitTime:this.getAverageCommitTime(e)};console.table(i),console.groupEnd(),this.showNotification(`⚡ Benchmark complete for ${t.name}`,"success")}))},getAverageCommitTime(e){const t=this.getComponentCommitsById(e).filter((e=>e.duration));if(0===t.length)return"0";return(t.reduce(((e,t)=>e+t.duration),0)/t.length).toFixed(2)},generateCode(){if(!this.selectedComponentForGeneration)return void this.showNotification("Please select a component first","warning");const e=this.components[this.selectedComponentForGeneration];if(e)switch(this.generatorType){case"test":this.generateTestCode(this.selectedComponentForGeneration);break;case"factory":this.generateFactoryCode(e);break;case"seeder":this.generateSeederCode(e);break;case"migration":this.generateMigrationCode(e);break;default:this.showNotification("Invalid generator type","error")}},generateFactoryCode(e){const t=Object.entries(e.properties).filter((([e,t])=>!e.startsWith("_"))).map((([e,t])=>{let o="word()";return e.includes("name")?o="name()":e.includes("email")?o="email()":e.includes("phone")?o="phoneNumber()":e.includes("address")?o="address()":e.includes("date")?o="date()":e.includes("description")||e.includes("body")?o="paragraph()":"number"===t.type?o="numberBetween(1, 100)":"boolean"===t.type&&(o="boolean()"),`            '${e}' => $this->faker->${o}`})).join(",\n"),o=`<?php\n\nnamespace Database\\Factories;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\Factory;\n\nclass ${e.name.replace(/\./g,"")}Factory extends Factory\n{\n    public function definition()\n    {\n        return [\n${t}\n        ];\n    }\n}`;navigator.clipboard.writeText(o).then((()=>{this.showNotification("📋 Factory code copied to clipboard","success"),console.log("🏭 Factory Code:\n",o)})).catch((()=>{this.showNotification("Failed to copy factory code","error")}))},generateSeederCode(e){const t=`<?php\n\nnamespace Database\\Seeders;\n\nuse Illuminate\\Database\\Seeder;\n\nclass ${e.name.replace(/\./g,"")}Seeder extends Seeder\n{\n    public function run()\n    {\n        // Create sample data based on component properties\n        \\App\\Models\\${e.name.split(".").pop()}::factory()\n            ->count(10)\n            ->create();\n    }\n}`;navigator.clipboard.writeText(t).then((()=>{this.showNotification("📋 Seeder code copied to clipboard","success"),console.log("🌱 Seeder Code:\n",t)})).catch((()=>{this.showNotification("Failed to copy seeder code","error")}))},generateMigrationCode(e){const t=Object.entries(e.properties).filter((([e,t])=>!e.startsWith("_"))).map((([e,t])=>{let o="string";return"number"===t.type?o=e.includes("id")?"unsignedBigInteger":"integer":"boolean"===t.type?o="boolean":"date"===t.type?o="timestamp":(e.includes("description")||e.includes("body"))&&(o="text"),`            $table->${o}('${e}')${null===t.value?"->nullable()":""};`})).join("\n"),o=e.name.split(".").pop().toLowerCase()+"s",i=`<?php\n\nuse Illuminate\\Database\\Migrations\\Migration;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Support\\Facades\\Schema;\n\nclass Create${e.name.replace(/\./g,"")}Table extends Migration\n{\n    public function up()\n    {\n        Schema::create('${o}', function (Blueprint $table) {\n            $table->id();\n${t}\n            $table->timestamps();\n        });\n    }\n\n    public function down()\n    {\n        Schema::dropIfExists('${o}');\n    }\n}`;navigator.clipboard.writeText(i).then((()=>{this.showNotification("📋 Migration code copied to clipboard","success"),console.log("🗃️ Migration Code:\n",i)})).catch((()=>{this.showNotification("Failed to copy migration code","error")}))},executeCodeGeneration(){this.generateCode()},runPerformanceProfile(){console.group("🚀 Performance Profile");const e={timestamp:(new Date).toISOString(),components:Object.entries(this.components).map((([e,t])=>({id:e,name:t.name,properties:Object.keys(t.properties).length,dataSize:this.getComponentDataSize(t),avgCommitTime:this.getAverageCommitTime(e),warnings:this.getPerformanceWarnings(t).length}))),summary:{totalComponents:Object.keys(this.components).length,totalProperties:this.getTotalProperties(),totalMemory:this.getTotalDataSize()+" KB",avgRenderTime:this.getAverageRenderTime()+" ms",totalEvents:this.getEvents().length,totalCommits:this.commits.length},hotspots:this.getPerformanceHotspots()};console.log("Summary:",e.summary),console.table(e.components),console.log("Performance Hotspots:",e.hotspots),console.groupEnd();const t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(o),n=document.createElement("a");n.href=i,n.download=`livewire-performance-profile-${Date.now()}.json`,n.click(),URL.revokeObjectURL(i),this.showNotification("🚀 Performance profile generated (check console)","success")},getMetricClass:(e,t)=>e<=t.good?"good":e<=t.warning?"warning":"critical",getPerformanceHotspots(){const e=[];return Object.entries(this.components).forEach((([t,o])=>{const i=Object.keys(o.properties).length;i>20&&e.push({type:"high_property_count",component:o.name,value:i,recommendation:"Consider splitting into smaller components"})})),Object.entries(this.components).forEach((([t,o])=>{const i=parseFloat(this.getComponentDataSize(o));i>100&&e.push({type:"large_data_size",component:o.name,value:i+" KB",recommendation:"Optimize data structure or implement pagination"})})),this.commits.forEach((t=>{if(t.duration&&t.duration>500){const o=this.components[t.componentId];o&&e.push({type:"slow_commit",component:o.name,value:t.duration+" ms",recommendation:"Optimize server-side processing"})}})),e},optimizeComponent(e){const t=this.components[e];if(!t)return;const o=[];Object.entries(t.properties).forEach((([e,t])=>{"array"===t.type&&t.value&&t.value.length>50&&o.push({property:e,issue:"Large array detected",solution:"Implement pagination or lazy loading",code:`// Add to your component:\nprotected $paginationTheme = 'bootstrap';\n\npublic function mount()\n{\n    $this->${e} = collect($this->${e})->paginate(20);\n}`}),t.isId&&!t.locked&&o.push({property:e,issue:"Unlocked ID property",solution:"Add #[Locked] attribute",code:`#[Locked]\npublic $${e};`}),"string"===t.type&&t.size>10240&&o.push({property:e,issue:"Large string property",solution:"Consider loading on demand",code:`// Load only when needed:\npublic function load${e.charAt(0).toUpperCase()+e.slice(1)}()\n{\n    $this->${e} = // Load from database or cache\n}`})})),0!==o.length?(console.group(`🔧 Optimization Suggestions for ${t.name}`),o.forEach((e=>{console.log(`\n📌 ${e.property}: ${e.issue}`),console.log(`✅ Solution: ${e.solution}`),console.log(`📝 Code:\n${e.code}`)})),console.groupEnd(),o[0]&&navigator.clipboard.writeText(o[0].code).then((()=>{this.showNotification(`🔧 ${o.length} optimizations found (first copied to clipboard)`,"info")}))):this.showNotification("✨ Component is already optimized!","success")},clearConsole(){this.consoleLogs=[],console.clear(),this.showNotification("🗑️ Console cleared","info")},logToConsole(e,t="log"){const o={id:Date.now(),timestamp:(new Date).toISOString(),message:e,type:t,source:"Livewire Debugbar"};this.consoleLogs.unshift(o),this.consoleLogs.length>100&&(this.consoleLogs=this.consoleLogs.slice(0,100)),console[t](`[Livewire Debugbar] ${e}`)}}}}();
